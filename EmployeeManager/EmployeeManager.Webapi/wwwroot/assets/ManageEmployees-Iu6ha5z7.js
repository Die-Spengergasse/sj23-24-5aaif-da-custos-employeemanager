import{_ as y,o,c as i,a as m,w as l,u as n,b as h,F as u,r as g,p as b,d as v,e as w,t as c,f,g as C,h as V}from"./index-iAiioZAi.js";import{s as E,a as k,b as S}from"./column.esm-Gt_K9cmx.js";const N=s=>(b("data-v-10768f0a"),s=s(),v(),s),B={class:"manageEmployeesView"},D=N(()=>w("h1",null,"Mitarbeiter verwalten",-1)),I={key:2,class:"error"},M={data(){return{employees:null,validation:{},columns:[{field:"guid",header:"Guid",hidden:!0},{field:"firstname",header:"Vorname"},{field:"lastname",header:"Nachname"},{field:"birth",header:"Gebutsdatum"}]}},async mounted(){const s=await h.get("employees");this.employees=s.data.map(e=>(e.birth=e.birth.substring(0,10),e))},methods:{async onCellEditComplete(s){let{data:e,newValue:p,field:r}=s;try{e[r]=p,this.validation={},await h.put("employees",e)}catch(a){a.response?a.response.data.errors?a.response.status==400&&(this.validation=Object.keys(a.response.data.errors).reduce((t,d)=>{const _=d.charAt(0).toLowerCase()+d.slice(1);return t[_]=a.response.data.errors[d][0],t},{guid:e.guid})):alert(a.response.data):alert("Der Server ist nicht erreichbar.")}}}},L=Object.assign(M,{__name:"ManageEmployees",setup(s){return(e,p)=>(o(),i("div",B,[D,m(n(E),{value:e.employees,editMode:"cell",onCellEditComplete:e.onCellEditComplete},{default:l(()=>[(o(!0),i(u,null,g(e.columns,r=>(o(),V(n(k),{key:r.field,field:r.field,header:r.header,hidden:r.hidden,sortable:""},{body:l(({data:a,field:t})=>[t=="birth"?(o(),i(u,{key:0},[f(c(new Date(a[t]).toLocaleDateString()),1)],64)):(o(),i(u,{key:1},[f(c(a[t]),1)],64)),e.validation.guid==a.guid?(o(),i("div",I,c(e.validation[t]),1)):C("",!0)]),editor:l(({data:a,field:t})=>[m(n(S),{modelValue:a[t],"onUpdate:modelValue":d=>a[t]=d,autofocus:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["field","header","hidden"]))),128))]),_:1},8,["value","onCellEditComplete"])]))}}),G=y(L,[["__scopeId","data-v-10768f0a"]]);export{G as default};
